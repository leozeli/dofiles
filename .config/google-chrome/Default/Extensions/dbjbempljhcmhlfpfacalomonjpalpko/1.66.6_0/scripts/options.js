/**
 * ImageAssistant
 * Project Home: http://www.pullywood.com/ImageAssistant/
 * Author: Joey
 * Copyright (C) 2013-2022 普利坞(Pullywood.com)
**/
"use strict";$((function(){document.title=_w_tango("_w_closet");$("#header_link_container").append($("<a />",{class:"navbar-brand",text:_w_tango("_w_fusion")}).prepend($("<img />",{src:"./images/icon128.png",id:"brand_text"})));$("#navbar").append($("<ul />",{class:"nav navbar-nav navbar-right"}).append($("<li />").append($("<a />",{id:"_pullywood_home_",target:"_pullywood_",href:"https://www.pullywood.com/",text:_w_tango("_w_acuity")}).prepend($("<span />",{class:"glyphicon glyphicon-home"})))).append($("<li />").append($("<a />",{target:"_ImageAssistant_Plus_",href:"https://www.pullywood.com/ImageAssistant_Plus/",text:_w_tango("_w_truism")}).prepend($("<span />",{class:"fab fa-app-store"})))));$("#sideNavbar").append($("<ul />",{class:"nav nav-sidebar"}).append($("<li />").append($("<a />",{class:"sidbarItem",href:"#",contentId:"extOption",text:_w_tango("_w_glow")}).prepend($("<span />",{class:"glyphicon glyphicon-wrench"})))).append($("<li />").append($("<a />",{class:"sidbarItem",href:"#",contentId:"aboutExt",text:_w_tango("_w_avowal")}).prepend($("<span />",{class:"glyphicon glyphicon-copyright-mark"})))));$("#defSizeOptTle").append(_w_tango("_w_harbor"));$("#defSizeOptAlert").append(_w_tango("_w_pollen"));$("#sizeOptionTle").append(_w_tango("_w_waffle"));$("#defautlOperation").append($("<div />",{class:"btn btn-primary",id:"selectAllButton",text:_w_tango("_w_knave")})).append($("<div />",{class:"btn btn-primary",id:"selectNoneButton",text:_w_tango("_w_studio")}));$("#customSizeOption").append(_w_tango("_w_cement"));$("#newItemWidth").attr("placeHolder",_w_tango("_w_skit"));$("#newItemHeight").attr("placeHolder",_w_tango("_w_toupee"));$("#newItemButton").append(_w_tango("_w_buggy"));$("#aboutExTle").append(_w_tango("_w_dandy"));$("#aboutExtCnt").append($("<h4 />",{class:"media-heading",text:_w_tango("_w_hawk")})).append($("<p />",{text:_w_tango("_w_ballad")})).append($("<p />",{html:_w_tango("_w_chord")})).append($("<div />",{class:"pwd-callout pwd-callout-info"}).append($("<h4 />",{class:"page-header",text:_w_tango("_w_prick")})).append($("<p />").append(_w_tango("_w_lobby")).append($("<a />",{target:"_pullywood_",href:"https://www.pullywood.com/ImageAssistant/#docs-download",text:chrome.runtime.getManifest().version}).append($("<span />",{id:"newVersion",text:"Latest: "+localStorage["version"]})))).append($("<p />").append($("<a />",{target:"_AppleAppStore_",href:"https://www.pullywood.com/ImageAssistant_Plus/",html:"<img height='32' src='./images/app_store_badge.png' />"}))).append($("<p />").append(_w_tango("_w_gander")).append($("<a />",{target:"_chromeAppStore_",href:"https://chrome.google.com/webstore/detail/dbjbempljhcmhlfpfacalomonjpalpko",text:"https://chrome.google.com/webstore/detail/dbjbempljhcmhlfpfacalomonjpalpko"}))).append($("<p />").append(_w_tango("_w_helot")).append($("<a />",{target:"_edgeAppStore_",href:"https://microsoftedge.microsoft.com/addons/detail/odphnbhiddhdpoccbialllejaajemdio",text:"https://microsoftedge.microsoft.com/addons/detail/odphnbhiddhdpoccbialllejaajemdio"}))).append($("<p />").append(_w_tango("_w_streak")).append($("<a />",{target:"_firefoxAppStore_",href:"https://addons.mozilla.org/zh-CN/firefox/addon/ia-batch-image-downloader/",text:"https://addons.mozilla.org/zh-CN/firefox/addon/ia-batch-image-downloader/"}))).append($("<p />").append(_w_tango("_w_shale")).append($("<a />",{target:"_source_list_",href:"https://www.pullywood.com/publish/imageassistant-resource-list",text:"https://www.pullywood.com/publish/imageassistant-resource-list"}))).append($("<p />").append(_w_tango("_w_plight")).append($("<a />",{target:"_pullywood_",href:"https://www.pullywood.com/ImageAssistant/",text:_w_tango("_w_byline")}))).append($("<p />").append(_w_tango("_w_canopy")).append($("<a />",{target:"_pullywood_",href:"https://www.pullywood.com/publish/",text:_w_tango("_w_toady")}))).append($("<p />").append($("<img />",{height:128,src:"./images/wechat_offical.jpg"})).append("&nbsp;&nbsp;&nbsp;&nbsp;").append($("<img />",{height:128,src:"./images/wechat.jpg"})))).append($("<p />").append(_w_tango("_w_forger")).append(" &copy; 2013 - 2022 ").append($("<a />",{target:"_pullywood_",href:"https://www.pullywood.com/",text:_w_tango("_w_idyll")})).append($("<span> | </span>").append($("<a />",{target:"_privacy_",href:_w_tango("_w_bazaar"),text:_w_tango("_w_shrub")}))));$("#dyLoadSize").prop("value",_w_genre()._w_clamp()).on("change",(function(){let _w_affix=$(this).prop("value");_w_genre()._w_pygmy(_w_affix);$(this).prop("value",_w_genre()._w_clamp())}));$("#extMaxLoad").prop("value",_w_genre()._w_snare()).on("change",(function(){let _w_snivel=$(this).prop("value");_w_genre()._w_canon(_w_snivel);$(this).prop("value",_w_genre()._w_snare())}));let _w_verve=_w_genre()._w_roster();let $_w_chapel=$("#extFormatChangeWhenDownOptContainer");let $_w_burrow=$("<div />",{class:"btn-toolbar",role:"toolbar"});for(let key in _w_verve){let $_w_polish=$("<div />",{class:"btn btn-default btn-md formatOption "+(_w_verve[key]?"btn-pwd active":""),value:key,text:key=="_"?_w_tango("_w_sham"):"*."+key});$_w_burrow.append($_w_polish)}$_w_chapel.append($_w_burrow);$(".formatOption").on("click",(function(){const _w_snob=$(this).attr("value");let _w_fungi=false;if($(this).is(".active")){_w_fungi=false;$(this).removeClass("btn-pwd active")}else{_w_fungi=true;$(this).addClass("btn-pwd active")}_w_verve=_w_genre()._w_roster();_w_verve[_w_snob]=_w_fungi;_w_genre()._w_plight(_w_verve);console.log(_w_verve)}));let _w_entre=_w_genre()._w_doyen();$("#download_covert_format option").each((function(){if($(this).prop("value")==_w_entre)$(this).prop("selected",true)}));$("#download_covert_format").on("change",(function(){_w_genre()._w_pitch($(this).get(0).selectedOptions[0].value)}));let _w_iota=_w_genre()._w_deed();let $pageInspectOptionContainer=$("#pageInspectOptionContainer");let $_w_sliver=$("<div />",{class:"btn btn-default btn-md inspectOption "+(_w_iota&1?"btn-pwd active":""),value:1,text:"Ajax"});let $_w_gaffe=$("<div />",{class:"btn btn-default btn-md inspectOption "+(_w_iota&2?"btn-pwd active":""),value:2,text:"Fetch"});$pageInspectOptionContainer.append($_w_sliver);$pageInspectOptionContainer.append($_w_gaffe);$(".inspectOption").on("click",(function(){let _w_dirge=_w_genre()._w_deed();let _w_mogul=parseInt($(this).attr("value"));if($(this).is(".active")){$(this).removeClass("btn-pwd active");_w_dirge^=_w_mogul}else{$(this).addClass("btn-pwd active");_w_dirge|=_w_mogul}_w_genre()._w_sanity(_w_dirge)}));$("#regexpUrlRule").html(_w_genre()._w_ditty()).on("blur",(function(){let _w_azure=$(this).text();let _w_putter=_w_genre()._w_aspect(_w_azure);let _w_knave=_w_genre()._w_ditty();for(let idx in _w_putter){_w_knave=_w_knave.replace(_w_putter[idx],"<crule>"+_w_putter[idx]+"</crule>")}$(this).html(_w_knave)})).trigger("blur");$("#resetRegexpUrlRule").on("click",(function(){$("#regexpUrlRule").html("").trigger("blur")}));$("#regexpUrlTestInput").on("blur",(function(){let $_w_prune=$("#regexpUrlTestOutput");$_w_prune.html("");$("#regexpUrlRule").trigger("blur");let _w_brand=$(this).prop("value");if(!_w_brand||_w_brand.trim("").length==0){$_w_prune.html("");return}else if(!_w_brand.startsWith("http://")&&!_w_brand.startsWith("https://")){$_w_prune.html(_w_tango("_w_sage"));return}let _w_ration=_w_genre()._w_morsel(_w_brand);if(!Array.isArray(_w_ration)||_w_ration.length==0){$_w_prune.html(_w_tango("_w_gallop"));return}else{_w_ration.forEach((function(matchedRule){$("#regexpUrlRule").html($("#regexpUrlRule").html().replace(matchedRule,"<mrule>"+matchedRule+"</mrule>"))}))}let _w_ransom=_w_genre()._w_gloom(_w_brand,1);$_w_prune.append(_w_tango("_w_maroon")+_w_brand+"\n");let $_w_votary=$("<span />",{text:_w_tango("_w_limb")});$_w_prune.append($_w_votary).append("\n");let _w_pylon=new Image;_w_pylon.onload=function(){$_w_votary.append(this.width+" x "+this.height)};_w_pylon.onerror=function(){_w_pylon.onerror=null;$_w_votary.append("N/A")};_w_pylon.src=_w_brand;_w_ransom.forEach((function(matchedUrl){console.log(matchedUrl);$_w_prune.append("<hr />"+_w_tango("_w_pauper")+matchedUrl+"\n");let $_w_scrub=$("<span />",{text:_w_tango("_w_clasp")});$_w_prune.append($_w_scrub).append("\n");let _w_bit=new Image;_w_bit.onload=function(){$_w_scrub.append(this.width+" x "+this.height)};_w_bit.onerror=function(){_w_bit.onerror=null;$_w_scrub.append("N/A")};_w_bit.src=matchedUrl}))}));$.getJSON(_w_hack,(function(data){let $_w_turret=$("#_cxyz_fav_");if(data.shortName){let _w_stitch=data.icon;let $_w_dome=$("<div />",{id:"popup_user_info"});let $_w_gale=$("<span />",{text:" [ "+data.shortName+" ] "});$_w_dome.append($_w_gale);$_w_turret.attr("href",_w_hack);$_w_turret.append($_w_dome)}else{}}));if(localStorage["version"]&&localStorage["version"]>chrome.runtime.getManifest().version){$("#newVersion").show()}let _w_haft=_w_cuff("showMsg");if(_w_haft!=null&&_w_haft=="about"){$("#aboutExt").slideDown().siblings().slideUp();let $_w_adobe=$(".sidbarItem[contentId=aboutExt]").parent();$_w_adobe.addClass("btn-pwd active")}else{$("#extOption").slideDown().siblings().slideUp();let $_w_adobe=$(".sidbarItem[contentId=extOption]").parent();$_w_adobe.addClass("btn-pwd active")}let _w_toxin=_w_genre()._w_snatch();$("#defaultFunnelWidth").val(_w_toxin.width);$("#defaultFunnelHeight").val(_w_toxin.height);$(".defaultFunnelSize").on("input",(function(){_w_toxin.width=$("#defaultFunnelWidth").val();_w_toxin.height=$("#defaultFunnelHeight").val();_w_genre()._w_seam(_w_toxin.width,_w_toxin.height)}));let _w_bench=_w_genre()._w_dearth();let _w_troupe=_w_genre()._w_lumen();_w_span(_w_bench,_w_troupe);$("#extClickActOptTle").html(_w_tango("_w_splint"));$("#extClickActOptDesc").html(_w_tango("_w_galaxy"));$("#dyLoadSizeOptTle").html(_w_tango("_w_credo"));$("#i18n_dynamic_load_desc").html(_w_tango("_w_siege"));$("#i18n_dynamic_load_desc_1").html(_w_tango("_w_icicle"));$("#extMaxLoadOptTle").html(_w_tango("_w_stupor"));$("#i18n_selector_page_max_load_image_desc").html(_w_tango("_w_icon"));$("#regexpUrlRuleOptTle").html(_w_tango("_w_clout"));$("#i18n_image_url_regexp_replace_expression_desc").html(_w_tango("_w_trophy"));$("#i18n_btn_default_rule").html(_w_tango("_w_charm"));$("#i18n_test_url").html(_w_tango("_w_lair"));$("#extFormatChangeWhenDownOptTle").html(_w_tango("_w_critic"));$("#pageInspectOptionTle").html(_w_tango("_w_moat"));$("#pageInspectContent").html(_w_tango("_w_pique"));$("#i18n_selector_ext_format_change_when_down").html(_w_tango("_w_tenure"))}));function _w_span(_w_bench,_w_troupe){let _w_hurdle=[];let _w_chef=[];function preDealContainer(_w_bench,_w_chef,_w_hurdle){for(let i=0;i<_w_bench.length;++i){let _w_quota=_w_bench[i];let _w_hoax=_w_bench[_w_quota];let _w_pecan=_w_hoax.width-_w_hoax.height>0?_w_hoax.width:_w_hoax.height;let _w_clog=_w_hoax.width-_w_hoax.height<0?_w_hoax.width:_w_hoax.height;let _w_pariah=_w_pecan+"x"+_w_clog;_w_pecan&&_w_clog&&_w_hurdle.indexOf(_w_pariah)==-1&&_w_chef.indexOf(_w_pariah)==-1&&_w_chef.push(_w_pariah)}}preDealContainer(_w_troupe,_w_hurdle,_w_hurdle);preDealContainer(_w_bench,_w_chef,_w_hurdle);_w_hurdle=_w_sheath(_w_hurdle);_w_chef=_w_sheath(_w_chef);function htmlContainerFill(_w_bench,_w_skunk,$_w_bane){for(let i=0;i<_w_skunk.length;++i){let $_w_memoir=$("<div />",{class:"btn-group btn-group-sm"});let _w_quota=_w_skunk[_w_skunk[i]];let _w_goggle=_w_quota.width+"x"+_w_quota.height;let $_w_blur=$("<div />",{class:"btn btn-default sizeItemOption",value:_w_goggle,text:_w_goggle});_w_bench.indexOf(_w_goggle)>-1&&$_w_blur.addClass("btn-pwd active");let _w_eclat=_w_quota.height+"x"+_w_quota.width;let $_w_lance=$("<div />",{class:"btn btn-default sizeItemOption",value:_w_eclat,text:_w_eclat});_w_bench.indexOf(_w_eclat)>-1&&$_w_lance.addClass("btn-pwd active");$_w_memoir.append($_w_blur);_w_quota.width-_w_quota.height!=0&&$_w_memoir.append($_w_lance);$_w_bane.append($_w_memoir)}}let $_w_stanza=$("#sizeConfigure");let $_w_auger=$("#sizeConfigurExt");htmlContainerFill(_w_bench,_w_hurdle,$_w_stanza);htmlContainerFill(_w_bench,_w_chef,$_w_auger);$("#selectAllButton").on("click",(function(){$("#sizeConfigure .sizeItemOption").each((function(){let _w_palate=$(this).attr("value").split("x");_w_palate[0]=parseInt(_w_palate[0]);_w_palate[1]=parseInt(_w_palate[1]);$(this).addClass("btn-pwd active");let _w_adobe=_w_bench[$(this).attr("value")];_w_genre()._w_spool(_w_palate[0],_w_palate[1])}))}));$("#selectNoneButton").on("click",(function(){$("#sizeConfigure .sizeItemOption").each((function(){let _w_palate=$(this).attr("value").split("x");_w_palate[0]=parseInt(_w_palate[0]);_w_palate[1]=parseInt(_w_palate[1]);$(this).removeClass("btn-pwd active");_w_genre()._w_pedal(_w_palate[0],_w_palate[1])}))}));$(".sizeItemOption").on("click",(function(){let _w_palate=$(this).attr("value").split("x");_w_palate[0]=parseInt(_w_palate[0]);_w_palate[1]=parseInt(_w_palate[1]);if($(this).is(".active")){$(this).removeClass("btn-pwd active");_w_genre()._w_pedal(_w_palate[0],_w_palate[1])}else{$(this).addClass("btn-pwd active");let _w_adobe=_w_bench[$(this).attr("value")];_w_genre()._w_spool(_w_palate[0],_w_palate[1])}}));$("#newItemButton").on("click",(function(){let _w_tiff=parseInt($("#newItemWidth").prop("value"));let _w_colon=parseInt($("#newItemHeight").prop("value"));_w_tiff&&_w_colon&&_w_tiff>0&&_w_colon>0&&_w_genre()._w_spool(_w_tiff,_w_colon);window.location.reload()}));$(".sidbarItem").on("click",(function(){$(this).parent().addClass("btn-pwd active").siblings().removeClass("btn-pwd active");$("#"+$(this).attr("contentId")).slideDown().siblings().slideUp()}))}