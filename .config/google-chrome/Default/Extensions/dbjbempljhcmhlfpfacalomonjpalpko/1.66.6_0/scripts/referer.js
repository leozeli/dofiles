/**
 * ImageAssistant
 * Project Home: http://www.pullywood.com/ImageAssistant/
 * Author: Joey
 * Copyright (C) 2013-2022 普利坞(Pullywood.com)
**/
"use strict";function _w_spite($_w_hassle){let _w_flail={};$_w_hassle.each((function(){let _w_howler=$(this).attr("data-src");let _w_pollen=$(this).attr("data-referer");if(_w_howler){_w_flail[_w_howler]=_w_pollen;$(this).attr("data-src",_w_howler);_w_flail[_w_howler]=_w_pollen}}));if(Object.keys(_w_flail).length>0){chrome.runtime.sendMessage(chrome.runtime.id,{type:"_w_alibi",refererMap:_w_flail},(function callback(data){$_w_hassle.each((function(){$(this).on("error",(function(){let _w_truant=$(this).attr("data-src");let $_w_lounge=$(this);$.ajax({method:"get",timeout:_w_writ,url:_w_truant}).fail((function(xhr){if(xhr.status===404){_w_truant=_w_phial(_w_truant);$_w_lounge.attr("data-src",_w_truant)}})).always((function(){setTimeout((function(){$_w_lounge.removeAttr("src").attr("src",_w_truant)}),2e3)}))}));if($(this).attr("src").indexOf("/static/gallery/favorite/image/loading.gif")>=0||$(this).attr("src").indexOf("/static/gallery/favorite/image/folder_02.png")>=0){$(this).attr("src",$(this).attr("data-src"))}else{(new Image).src=$(this).attr("data-src")}}))}))}}(function(){_w_spite($("img[data-src]"));let _w_abuse=new MutationObserver((function(_w_coward){_w_coward.map((function(record){if(record.addedNodes){let _w_sock={};for(let i=0;i<record.addedNodes.length;++i){let _w_twig=record.addedNodes.item(i);let _w_hassle=$(_w_twig).find("img").toArray();$(_w_twig).is("IMG")&&_w_hassle.push(_w_twig);_w_spite($(_w_hassle))}}}))}));let _w_tactic=document.body;let _w_mien={childList:true,subtree:true};_w_abuse.observe(_w_tactic,_w_mien);if($(".cxyz_btn_edit_folder").length>0){let $_w_file=$(".callout_btn_menu");let $_w_stem=$("<button />",{class:"btn btn-success",title:" 标记收藏到此文件夹"}).prepend($("<span />",{class:"glyphicon glyphicon-map-marker"}));$_w_file.append($_w_stem);$_w_stem.on("click",(function(){let _w_viand={};_w_viand.markTime=parseInt((new Date).getTime()/1e3);_w_viand.categoryId=parseInt($(".cxyz_btn_edit_folder").attr("data-categoryId"));_w_viand.folderId=parseInt($(".cxyz_btn_edit_folder").attr("value"));chrome.runtime.sendMessage(chrome.runtime.id,{type:"_w_spire",folderMark:JSON.stringify(_w_viand)});let $_w_matrix=$("<span>(标记成功！)</span>");$(this).append($_w_matrix);setTimeout((function(){$_w_matrix.remove()}),2e3)}))}if($("#rs_lt_list").length>0||$("#rs_eq_list").length>0){chrome.runtime.sendMessage(chrome.runtime.id,{type:"_w_dearth"},(function(_w_bench){let $_w_dogma=$("#rs_lt_list");let $_w_frond=$("#rs_eq_list");if(_w_bench.length>0){if($_w_dogma)$_w_dogma.append($("<li />",{class:"divider",role:"separator"}));if($_w_frond)$_w_frond.append($("<li />",{class:"divider",role:"separator"}))}for(let i=0;i<_w_bench.length;++i){let _w_nadir=_w_bench[i];let _w_dainty=_w_nadir.split("x");let _w_tiff=parseInt(_w_dainty[0]);let _w_colon=parseInt(_w_dainty[1]);if($_w_dogma){let $_w_carol=$("<a />",{class:"rs_lt_item",text:_w_nadir,"data-width":_w_tiff,"data-height":_w_colon});$_w_dogma.append($("<li />").append($_w_carol))}if($_w_frond){let $_w_fender=$("<a />",{class:"rs_eq_item",text:_w_nadir,"data-width":_w_tiff,"data-height":_w_colon});$_w_frond.append($("<li />").append($_w_fender))}}}))}})();